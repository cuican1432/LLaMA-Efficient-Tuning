[{"instruction": "为什么大多数的指标选择“最近1天”作为时间修饰？", "input": "", "output": "时间限定：用于明确数据统计的时间范围，比如：最近1天、最近1周、最近30天等。为了实验指标单日值计算的方便，当前平台大多数指标的时间修饰都配置的是最近1天。时间限定在实验中是无效的，不同的时间限定不影响指标的计算结果，在数据探查等其他任务中时间限定则会生效。", "history": null}, {"instruction": "业务限定和维度下钻的区别是？", "input": "", "output": "● 业务限定：用于明确数据统计的业务范围，比如：PC端、App端等。业务限定和下面要讲的维度没有严格的界线；但在使用中，业务限定往往作用于指标，而维度作用于用户，用作用户群体的拆分。 ● 维度：维度用来反映业务的一类属性，比如像国家、地区、城市等地理维度，像性别、年龄等自然人维度。通过维度可以从不同的视角观察数据。", "history": null}, {"instruction": "指标可以基于度量和源表两种方式加工方式？ ", "input": "", "output": "如果是“基于度量加工”的方式创建指标，则必须要先创建度量，而如果是“基于源表注册”创建指标则可不需要提前创建度量。基于度量注册是指先完成创建度量，再勾选度量、业务修饰、时间修饰完成创建指标，其好处是已创建的度量可复用于其他指标。基于源表注册是指直接从源表录入加工指标的方式完成指标创建。", "history": null}, {"instruction": "某个源表缺乏必要的分析维度，我能新建一个口径相同但源表不同的度量吗？", "input": "", "output": "在工程逻辑上允许构建源表不同但是口径相同的度量，但是从指标规范化来看， 应当与相关DS同学沟通修改度量名称，或者在源表中固化常用维度，维护度量的唯一性与口径的一致性。", "history": null}, {"instruction": "象数支持建立两个命名不同但SQL逻辑相同的度量/指标吗？", "input": "", "output": "不支持。中英文命名的去重检查只在同业务域下生效，即可以在不同的业务域下建两个相同名称的指标，但SQL逻辑的去重检查则会在全局生效：当两个度量/指标的源表和SQL逻辑完全相同时，但仅仅是命名不同的时候，在提交的时候会弹出错误信息提示已有相同逻辑的度量/指标。SQL逻辑包括三层聚合逻辑和WHERE限定等逻辑，不包括keyType。", "history": null}, {"instruction": "普通度量、归因度量、留存度量、比率度量分别是什么？", "input": "", "output": "度量用于指的是某一个指标的计算方法（可直观且狭义的理解为一段sql，将表中一堆数映射为一个数字），分为普通度量和衍生度量。普通度量的属性包含基本信息（名称、业务口径、所属业务域）、取数逻辑和聚合逻辑三部分。指标值的计算方法按照度量的聚合逻辑+业务限定（where条件）+时间限定进行。Diff（右上图指标卡片的百分数）则是将度量的跨key聚合逻辑更改为AVG（即跨key求均值），按照该方式计算两桶样本均值后，以对照桶为基准计算$Diff=(value_{exp}-value_{con})/value_{con}*100\\%$。计算$p$值需要首先计算实验桶和对照桶的样本方差，随后计算$T$统计量，最终根据正态分布计算双侧检测的$p$值，公式如下： $t-stat=\\frac{\\bar{\\mu}_{X_1}-\\bar{\\mu}_{X_2}}{\\sqrt{s_1^2/n_1+s_2^2/n_2}}$，$p-val=2*(1-\\Phi^{-1}(|t-stat|))$ 衍生度量在普通度量的基础上演变而来，比率度量是衍生度量的一种。比率度量可以理解为是一种比率型指标，其中分子和分布是定义的普通度量，其比值为衍生得到的比率度量，比率度量指标值的计算方式为，首先根据分子度量+分子业务限定的聚合逻辑计算分子的指标值，随后根据分母度量+分母业务限定的聚合逻辑计算分母指标值，最后计算分子与分母指标值的比值作为所展示的比率度量指标值。Diff的计算方式直接根据实验桶和对照桶的比率指标值进行计算。比率指标的p值计算难点在于估计统计量$\\bar{y}/\\bar{x}$的方差。方差的估计可以参考文章https://ata.alibaba-inc.com/articles/88711、https://ata.alibaba-inc.com/articles/89817?spm=ata.23639746.0.0.63205e09MmgVxR。在得到比率指标的方差估计后，可以计算t统计量，并计算双侧检验的p值。", "history": null}, {"instruction": "设计比率型指标的时候，需要注意什么？ ", "input": "", "output": "需要注意在设计比率型指标的时候，要考虑UV、PV和UPV型指标的差异。这里以点击率为例进行说明。UV型点击率的口径很明确，即点击UV/曝光UV，也就是分子和分母会按照用户进行去重；PV型点击率的定义口径在不同的场景下可以不同，主要在于对去重粒度的选择上，比如定义为点击数/曝光数；UPV型指标则是先对各个用户计算PV型指标，再对UV求均值，即$mean(点击数/曝光数)$。需要注意PV型指标通常更容易受到活跃用户的影响，UPV和UV受到的影响较小。建议对重要环节上的比率指标，UV和PV型指标都关注，能够更好的发现其中可能存在的问题。 关于UV、PV和UPV的介绍以及更详细的内容可参考：https://ata.alibaba-inc.com/articles/96121", "history": null}, {"instruction": "归因度量是什么？", "input": "", "output": "归因度量用于度量初始行为对后续行为的影响并进行归因分析，衡量不同初始行为对后续行为的贡献度，具有如下属性：初始行为以及后续行为，关联属性，归因窗口期，归因模型。（目前象数上还没有找到较好的例子进行说明，后续有待补充）。 归因分析可以参考：归因指标；  归因分析；留存度量用于进行留存分析，希望考察在初始行为后的用户有多少会进行后续行为。因此属性包括初始行为（分母度量）和后续行为（分子度量）及其关联属性。 一个留存指标是一种比率度量，需要分别通过留存度量的方式定义分母度量和分子度量。要构建一个留存度量，需要定义初始行为和判断后续留存行为，对这两个行为分别添加过滤条件，并设置两种行为的关联属性。需要定义留存窗口期，和留存类型，现有类型包括N日内留存和第N日留存。在设定好取数逻辑后，需要设置分子和分母的聚合逻辑（分子和分母的取数逻辑应当完全相同）。分母的聚合逻辑中，被聚合的字段应当来自于A，而分子的聚合逻辑字段应当来自于B", "history": null}, {"instruction": "如何构造归因指标？ ", "input": "", "output": "总的来说，要构建一个留存指标，步骤为：1）利用留存度量定义分子度量；2）利用留存度量定义分母度量；3）构建比率度量，分子和分母分别是上述所构建的分子度量和分母度量；4）基于该比率度量定义留存指标。由于留存指标本质上是比率，因此计算方式与比率指标完全相同。 需要一提的是，目前象数会在所定义的留存指标被第一次调用的时候构建一张中间表作为该留存的底表（根据留存度量的取数逻辑得到）。 留存分析可以参考：留存分析", "history": null}, {"instruction": "度量的正向方向是什么含义？为什么有些指标负向但是飘红？", "input": "", "output": "度量的正向方向表示业务上希望度量优化的方向，分为上升和下降，正向为上升的度量如GMV，我们希望它越高越好，而正向为上升的度量如流失率，我们希望它越低越好。 正向方向设置后会影响实验报表中卡片颜色显示红色还是绿色，正向方向上升和下降分别对应正向指标和负向指标。实验报表中的相对差异是实验组减去对照组，对正向指标是差异为正时飘红，对负向指标是差异为负时飘红。简单理解，飘红的都是好的。", "history": null}, {"instruction": "创建度量时应该怎么填写业务口径？它会在哪显示？", "input": "", "output": "业务口径的填写应该明确易懂。如对于“人均有效消费次数”度量：人均观看视频超过3秒及以上的次数。 指标的业务口径格式会根据度量和时间限定自动生成。", "history": null}, {"instruction": "什么是keyType？", "input": "", "output": "什么是keytype  keytype是数据粒度的一种，标识指标值由何种粒度的数据直接聚合得来。在定义指标计算口径的时候，需要首先指定KeyType，然后指标的聚合逻辑围绕KeyType被格式化地拆解成三个步骤：同key同ds聚合->同key聚合->跨key聚合；由于明细数据可以基于不同的粒度进行聚合，因此可以选择多个keytype。", "history": null}, {"instruction": "为什么可选择多个keyType？", "input": "", "output": "为什么可选择多个keytpe  它的设置会影响后续实验在不同的分流key下能否关联同key的指标，举个例子：当你的实验分流类型为Cookie，那么你在这个实验中就只能关注KeyType为Cookie的指标，其他KeyType类型的指标是无法在这个实验中计算的。", "history": null}, {"instruction": "这里keyTypeID都对应哪个字段？有具体的例子吗？", "input": "", "output": "keytypeID都对应的字段  目前象数支持的KeyType包括但不限于以下几种，如果有缺失，可提交给对应数科同学帮忙添加/维护。请注意，keytype字段中禁止含'｜'，为象数SDK的保留字段： ● 买家ID：买家主账号ID，常用字段名byr_admin_mbr_id ● 商家ID：卖家主账号ID，常用字段名slr_admin_mbr_id ● 商家seq：卖家主账序列号，常用字段名slr_admin_mbr_seq ● 会员ID：买家主账号ID和卖家主账号ID的混合ID ● 设备ID：常用字段名utdid、device_id（有时候需要做url_encoding） ● Cookie：常用字段名cookie_id ● 用户ID：App端流量取utdid，PC、Wap端流量取cookie_id ● COMPANT_ID : 使用的商家的companyId", "history": null}, {"instruction": "什么是三层聚合逻辑？", "input": "", "output": "象数指标定义遵循Onedata指标定义规范，具体创建原则可以概括为：指标 = 时间限定+业务限定+度量。指标描述的是每个分流key最小粒度的效果，三层聚合逻辑则是指如何在实验当中将每个分流key对应的指标汇总统计，之所以要做三层聚合模型，有以下几个原因： ● 象数希望不仅可以计算指标值，还能对数据做一些统计描述。比如计算方差衡量数据波动情况、计算偏度、峰度衡量数据长尾程度等。补充说明一下，我们将每个用户（即分流key）的效果视为一个样本，即上图中S2的每一个key对应的指标值是每个样本的效果，在此基础上我们能计算出样本的均值（上图S3方法）、方差、偏度、峰度。进行统计描述的重点在于我们需要从明细粒度开始聚合。 ● 统计计算需要对用户透明。用户只关心指标怎样聚合，平台自动拼接统计计算，这就需要对计算方法格式化； ● 聚合模型抽象为三层，目的是支持更多类型的指标（三层聚合逻辑由内至外层分别是：S1同key同天聚合、S2同key跨天聚合、S3跨key聚合）。对比市面上常见的两层聚合（S1和S3），三层聚合能够支持用户跨天聚合方式改变（如下图最近30天AB数量），而省掉跨天聚合只能计算跨天不去重的指标（如下图最近30天日均AB数量），更多详细案例参考 中新建度量->1.3聚合逻辑中的案例", "history": null}]